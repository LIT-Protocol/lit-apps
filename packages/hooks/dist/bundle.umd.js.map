{"version":3,"file":"bundle.umd.js","sources":["../parents/useCustomState.js","../parents/useFetchData.js"],"sourcesContent":["// Usage:\n// -----\n// import React from \"react\";\n// import { useCustomState } from \"./useCustomState\";\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\n// const MyComponent = (props: any) => {\n//   const initialState = { data: [], loading: false };\n//   const [state, handleNewState] = useCustomState(initialState, props.onChange);\n//   // Your component logic here\n//   return <div>My component</div>;\n// };\n// export default MyComponent;\n// Then use it like this:\n// ----\n//  const handleNewState = (newState: any) => {\n//   dispatch({\n//     type: \"SET_DATA\",\n//     payload: newState,\n//   });\n//   if (prop.onChange) {\n//     console.log(\"state:\", state.data);\n//     prop.onChange({ ...state.data, ...newState });\n//   }\n// };\nimport { useReducer } from \"react\";\nvar StateReducer = function (state, action) {\n    var newState;\n    switch (action.type) {\n        case \"SET_DATA\":\n            newState = { data: __assign(__assign({}, state.data), action.payload), loading: false };\n            break;\n        default:\n            return state;\n    }\n    return newState;\n};\nexport var useCustomState = function (initialState, onChange) {\n    var _a = useReducer(StateReducer, initialState), state = _a[0], dispatch = _a[1];\n    var handleNewState = function (newState) {\n        dispatch({\n            type: \"SET_DATA\",\n            payload: newState,\n        });\n        if (onChange) {\n            console.log(\"state:\", state.data);\n            onChange(__assign(__assign({}, state.data), newState));\n        }\n    };\n    var clearAllState = function () {\n        dispatch({\n            type: \"SET_DATA\",\n            payload: initialState,\n        });\n        if (onChange) {\n            onChange(initialState);\n        }\n    };\n    return [state, handleNewState, clearAllState];\n};\n","var __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (g && (g = 0, op[0] && (_ = 0)), _) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nimport { useReducer, useCallback } from \"react\";\nvar dataFetchReducer = function (state, action) {\n    switch (action.type) {\n        case \"FETCH_INIT\":\n            return __assign(__assign({}, state), { loading: true, error: null });\n        case \"FETCH_SUCCESS\":\n            return __assign(__assign({}, state), { loading: false, data: action.payload, error: null });\n        case \"FETCH_FAILURE\":\n            return __assign(__assign({}, state), { loading: false, error: action.payload });\n        default:\n            throw new Error(\"Invalid action type\");\n    }\n};\n/**\n * useFetchData is a custom hook that fetches data from an API\n * when the returned \"start\" function is called, and returns the data, loading, and error states.\n *\n * Example usage:\n * ```\n * const fetchFunction = async () => {\n *   const response = await fetch(`https://example.com/api/endpoint`);\n *   return response.json();\n * };\n *\n * const { data, loading, error, start } = useFetchData(fetchFunction);\n *\n * // Call start() to initiate data fetching\n * start();\n * ```\n *\n * @param fetchFunction The function to fetch data\n * @return { data, loading, error, start } The data, loading, error states, and a start function to initiate fetching\n */\nexport function useFetchData(fetchFunction) {\n    var _this = this;\n    var _a = useReducer(dataFetchReducer, {\n        data: null,\n        loading: false,\n        error: null,\n    }), state = _a[0], dispatch = _a[1];\n    var fetchData = useCallback(function () { return __awaiter(_this, void 0, void 0, function () {\n        var responseData, error_1;\n        return __generator(this, function (_a) {\n            switch (_a.label) {\n                case 0:\n                    dispatch({ type: \"FETCH_INIT\" });\n                    _a.label = 1;\n                case 1:\n                    _a.trys.push([1, 3, , 4]);\n                    return [4 /*yield*/, fetchFunction()];\n                case 2:\n                    responseData = _a.sent();\n                    dispatch({ type: \"FETCH_SUCCESS\", payload: responseData });\n                    return [3 /*break*/, 4];\n                case 3:\n                    error_1 = _a.sent();\n                    dispatch({ type: \"FETCH_FAILURE\", payload: error_1 });\n                    return [3 /*break*/, 4];\n                case 4: return [2 /*return*/];\n            }\n        });\n    }); }, [fetchFunction]);\n    return __assign(__assign({}, state), { start: fetchData });\n}\n"],"names":["__assign","Object","assign","t","s","i","n","arguments","length","p","prototype","hasOwnProperty","call","apply","this","StateReducer","state","action","type","data","payload","loading","__awaiter","thisArg","_arguments","P","generator","Promise","resolve","reject","fulfilled","value","step","next","e","rejected","result","done","then","__generator","body","f","y","g","_","label","sent","trys","ops","verb","throw","return","Symbol","iterator","v","op","TypeError","pop","push","dataFetchReducer","error","Error","initialState","onChange","_a","useReducer","dispatch","newState","console","log","fetchFunction","_this","fetchData","useCallback","responseData","error_1","start"],"mappings":"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"}